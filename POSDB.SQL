-- SQLITE3 SQL SCRIPT
-- .READ POSDB.SQL

BEGIN TRANSACTION;
DROP TABLE IF EXISTS ADDRESS;
CREATE TABLE ADDRESS (
  address_id INTEGER NOT NULL PRIMARY KEY, 
  street_number INTEGER, 
  suite_number INTEGER, 
  street_name VARCHAR(45), 
  street_suffix VARCHAR(45), 
  city VARCHAR(45), 
  province VARCHAR(45), 
  postal_code VARCHAR(45)
);
INSERT INTO ADDRESS VALUES(1,852,'','Fairlawn','Ave','Ottawa','Ontario','K2A4C2');
INSERT INTO ADDRESS VALUES(2,986,'6E','Wonderbar','Lane','Compton','Ohio',226589);
INSERT INTO ADDRESS VALUES(3,839,59,'Main','St','Ottawa','Ontario','K2A4C2');
INSERT INTO ADDRESS VALUES(4,789,'','Slacker','Lane','Toronto','Ontario','K3D4C2');
INSERT INTO ADDRESS VALUES(5,56,8,'Eagleson','Road','Kanata','Ontario','K5FT8S');

DROP TABLE IF EXISTS CATEGORY;
CREATE TABLE CATEGORY (
  category_id INTEGER NOT NULL PRIMARY KEY, 
  parent_category_id INTEGER references CATEGORY(category_id), 
  category_name VARCHAR(45)
);
INSERT INTO CATEGORY VALUES(1,0,'Beverage');
INSERT INTO CATEGORY VALUES(2,0,'Clothing');
INSERT INTO CATEGORY VALUES(3,0,'Food');
INSERT INTO CATEGORY VALUES(4,0,'Electronics');
INSERT INTO CATEGORY VALUES(5,0,'Health Care');
INSERT INTO CATEGORY VALUES(6,1,'Soft drinks');
INSERT INTO CATEGORY VALUES(7,1,'Wine');
INSERT INTO CATEGORY VALUES(8,2,'Shirt');
INSERT INTO CATEGORY VALUES(9,2,'Pants');
INSERT INTO CATEGORY VALUES(10,2,'Footwear');
INSERT INTO CATEGORY VALUES(11,2,'Headgear');
INSERT INTO CATEGORY VALUES(12,2,'Gloves');
INSERT INTO CATEGORY VALUES(13,3,'Groceries');
INSERT INTO CATEGORY VALUES(14,3,'Candy');
INSERT INTO CATEGORY VALUES(15,3,'Baked goods');
INSERT INTO CATEGORY VALUES(16,3,'Hot ready made');
INSERT INTO CATEGORY VALUES(17,3,'Snacks');
INSERT INTO CATEGORY VALUES(18,3,'Meats');
INSERT INTO CATEGORY VALUES(19,4,'Music gear');
INSERT INTO CATEGORY VALUES(20,4,'Entertainment');
INSERT INTO CATEGORY VALUES(21,4,'Game console accesseries');
INSERT INTO CATEGORY VALUES(22,4,'Household electronics');
INSERT INTO CATEGORY VALUES(23,5,'Pharmaceuticals');
INSERT INTO CATEGORY VALUES(24,5,'Family planning');
INSERT INTO CATEGORY VALUES(25,5,'Suppliments');
INSERT INTO CATEGORY VALUES(28,1,'Coffee');
INSERT INTO CATEGORY VALUES(29,0,'General Accessories');
INSERT INTO CATEGORY VALUES(30,29,'Household');
INSERT INTO CATEGORY VALUES(31,29,'Office Supplies');

DROP TABLE IF EXISTS EMPLOYEE;
CREATE TABLE EMPLOYEE (
  password TEXT, 
  employee_number INTEGER NOT NULL PRIMARY KEY, 
  job_title_id INTEGER, 
  address_id INTEGER, 
  fname VARCHAR(45), 
  lname VARCHAR(45), 
  date_started TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL, 
  vacation_days_left INTEGER, 
  hourly_wage INTEGER, 
  social_insurance INTEGER UNIQUE,
  foreign key(job_title_id) references JOB_TITLE(job_title_id),
  foreign key(address_id) references ADDRESS(address_id)
);
INSERT INTO EMPLOYEE VALUES('5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8',1,1,1,'Charlie','Li','2015-03-23 00:36:09',100,30,100832579);
INSERT INTO EMPLOYEE VALUES('5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8',2,2,3,'John','Doe','2015-03-23 00:36:09',30,25,123456789);
INSERT INTO EMPLOYEE VALUES('5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8',3,4,4,'Johnny','MacDonald','2015-03-23 00:36:09',30,10,987654321);
INSERT INTO EMPLOYEE VALUES('5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8',4,3,5,'Sally','Robertson','2015-03-23 00:36:09',30,26,456132789);

DROP TABLE IF EXISTS INVENTORY_RECORD;
CREATE TABLE INVENTORY_RECORD(
  record_id INT NOT NULL,
  product_id INT NOT NULL,
  supplier_id INT NULL,
  quantity_received INT NULL,
  current_quantity INT NULL,
  date_received DATETIME NULL,
  date_last_modified DATETIME NULL,
  incomming_on_order INT NULL,
  PRIMARY KEY (record_id, product_id),
  FOREIGN KEY (product_id) REFERENCES PRODUCT(product_id)
  FOREIGN KEY (supplier_id) REFERENCES SUPPLIER(supplier_id)
);

DROP TABLE IF EXISTS JOB_TITLE;
CREATE TABLE JOB_TITLE (
  job_title_id INTEGER NOT NULL PRIMARY KEY, 
  job_title_name VARCHAR(45)
);
INSERT INTO JOB_TITLE VALUES(1,'Admin');
INSERT INTO JOB_TITLE VALUES(2,'Manager');
INSERT INTO JOB_TITLE VALUES(3,'Accountant');
INSERT INTO JOB_TITLE VALUES(4,'Employee');

DROP TABLE IF EXISTS PRODUCT;
CREATE TABLE PRODUCT (
  product_id INTEGER NOT NULL PRIMARY KEY, 
  product_barcode_sku INTEGER, 
  category_id INTEGER NOT NULL, 
  product_name VARCHAR(45), 
  price INTEGER, 
  date_discontinued DATETIME,
  foreign key(category_id) references CATEGORY(category_id)
);
INSERT INTO PRODUCT VALUES(1,100832879,2,'Tank Top',2099,NULL);
INSERT INTO PRODUCT VALUES(2,100879584,7,'Champagne',5500,NULL);
INSERT INTO PRODUCT VALUES(3,100869878,9,'Jeans',3099,NULL);
INSERT INTO PRODUCT VALUES(4,100879887,17,'Potato Chips',399,NULL);
INSERT INTO PRODUCT VALUES(5,100879836,19,'Headphones',4599,NULL);
INSERT INTO PRODUCT VALUES(6,100896345,14,'Sour Patch Kids',199,NULL);
INSERT INTO PRODUCT VALUES(7,100897582,10,'Shoes',4999,NULL);
INSERT INTO PRODUCT VALUES(8,100881469,20,'32'' TV',31999,NULL);
INSERT INTO PRODUCT VALUES(9,100859784,25,'Vitamin D',2499,NULL);
INSERT INTO PRODUCT VALUES(10,100769898,11,'Baseball Cap',1199,NULL);
INSERT INTO PRODUCT VALUES(11,100765898,16,'Soup',199,NULL);
INSERT INTO PRODUCT VALUES(12,100898989,23,'Cough Syrup',899,NULL);
INSERT INTO PRODUCT VALUES(13,100875632,13,'Lettuce',99,NULL);
INSERT INTO PRODUCT VALUES(14,100864987,29,'Bucket',459,NULL);
INSERT INTO PRODUCT VALUES(15,100894686,7,'White Wine',2400,NULL);
INSERT INTO PRODUCT VALUES(16,100698732,7,'Red Wine',3000,NULL);
INSERT INTO PRODUCT VALUES(17,100862318,8,'V-Neck Shirt',1249,NULL);
INSERT INTO PRODUCT VALUES(18,100864879,12,'Leather Gloves',3479,NULL);
INSERT INTO PRODUCT VALUES(19,100995354,11,'Sun Glasses',1769,NULL);
INSERT INTO PRODUCT VALUES(20,1003214589,14,'Chocolate',125,NULL);
INSERT INTO PRODUCT VALUES(21,100965318,14,'Oat Bar',225,NULL);
INSERT INTO PRODUCT VALUES(22,100987555,9,'Khaki',3499,NULL);
INSERT INTO PRODUCT VALUES(23,100799568,9,'Dress Pants',4499,NULL);
INSERT INTO PRODUCT VALUES(24,100987115,9,'Shorts',2699,NULL);
INSERT INTO PRODUCT VALUES(25,100987541,9,'Running Shorts',2299,NULL);
INSERT INTO PRODUCT VALUES(26,100365669,10,'Running Shoes',3999,NULL);
INSERT INTO PRODUCT VALUES(27,100798544,10,'Flip Flop',1999,NULL);
INSERT INTO PRODUCT VALUES(28,100769336,10,'Sandals',2399,NULL);
INSERT INTO PRODUCT VALUES(29,100928653,18,'Steak',2399,NULL);
INSERT INTO PRODUCT VALUES(30,100965866,18,'Salami',759,NULL);
INSERT INTO PRODUCT VALUES(31,100961125,18,'Ham',519,NULL);
INSERT INTO PRODUCT VALUES(32,100698321,18,'Chicken Breast',519,NULL);
INSERT INTO PRODUCT VALUES(33,100695336,17,'Cookie',349,NULL);
INSERT INTO PRODUCT VALUES(34,100961145,16,'French Fries',349,NULL);
INSERT INTO PRODUCT VALUES(35,100965142,16,'Pizza',400,NULL);
INSERT INTO PRODUCT VALUES(36,100994586,31,'Notebooks',200,NULL);
INSERT INTO PRODUCT VALUES(37,100965832,31,'Sticky Notes',225,NULL);
INSERT INTO PRODUCT VALUES(38,100744511,31,'Ball Point Pens',250,NULL);
INSERT INTO PRODUCT VALUES(39,100744596,31,'Pencil',250,NULL);
INSERT INTO PRODUCT VALUES(40,100748699,31,'Binders',250,NULL);
INSERT INTO PRODUCT VALUES(41,100734512,31,'Eraser',125,NULL);
INSERT INTO PRODUCT VALUES(42,100895487,30,'Detergent',2600,NULL);
INSERT INTO PRODUCT VALUES(43,100711997,30,'Duster',1215,NULL);
INSERT INTO PRODUCT VALUES(44,100876312,23,'Flu Medication',1500,NULL);
INSERT INTO PRODUCT VALUES(45,100876967,23,'Cough Drops',600,NULL);
INSERT INTO PRODUCT VALUES(46,100887546,21,'Play Station 4',42599,NULL);
INSERT INTO PRODUCT VALUES(47,100832549,21,'Game Boy Color',12565,NULL);
INSERT INTO PRODUCT VALUES(48,1008665215,21,'Nintendo Wii',26590,NULL);
INSERT INTO PRODUCT VALUES(49,100839165,21,'Xbox Controllers',6099,NULL);
INSERT INTO PRODUCT VALUES(50,100865928,21,'Playstation Controller',5099,NULL);
INSERT INTO PRODUCT VALUES(51,100986224,13,'Apple',99,NULL);

DROP TABLE IF EXISTS SALE_DETAILS;
CREATE TABLE SALE_DETAILS (
sale_transaction_id NOT NULL references SALE_TRANSACTION(sale_transaction_id), 
  product_id NOT NULL references PRODUCT(product_id),
  discounted FLOAT, 
  final_price FLOAT, 
  quantity_bought VARCHAR(45),
  primary key(sale_transaction_id,product_id)
);
INSERT INTO SALE_DETAILS VALUES(1,51,0.0,99.0,2);
INSERT INTO SALE_DETAILS VALUES(1,32,0.0,519.0,1);
INSERT INTO SALE_DETAILS VALUES(2,43,0.0,1215.0,2);
INSERT INTO SALE_DETAILS VALUES(2,41,0.0,125.0,2);
INSERT INTO SALE_DETAILS VALUES(2,33,0.0,349.0,1);
INSERT INTO SALE_DETAILS VALUES(3,12,0.0,899.0,3);
INSERT INTO SALE_DETAILS VALUES(3,45,0.0,600.0,2);
INSERT INTO SALE_DETAILS VALUES(4,2,0.0,5500.0,1);
INSERT INTO SALE_DETAILS VALUES(4,43,0.0,1215.0,1);
INSERT INTO SALE_DETAILS VALUES(4,48,0.0,26590.0,4);
INSERT INTO SALE_DETAILS VALUES(5,32,0.0,519.0,1);
INSERT INTO SALE_DETAILS VALUES(5,20,0.0,125.0,1);
INSERT INTO SALE_DETAILS VALUES(5,43,0.0,1215.0,3);
INSERT INTO SALE_DETAILS VALUES(6,32,0.0,519.0,1);
INSERT INTO SALE_DETAILS VALUES(6,20,0.0,125.0,1);
INSERT INTO SALE_DETAILS VALUES(6,38,0.0,250.0,1);
INSERT INTO SALE_DETAILS VALUES(6,10,0.0,1199.0,1);
INSERT INTO SALE_DETAILS VALUES(7,23,0.0,4499.0,1);
INSERT INTO SALE_DETAILS VALUES(7,41,0.0,125.0,2);
INSERT INTO SALE_DETAILS VALUES(7,33,0.0,349.0,2);
INSERT INTO SALE_DETAILS VALUES(7,3,0.0,3099.0,2);

DROP TABLE IF EXISTS SALE_TRANSACTION;
CREATE TABLE SALE_TRANSACTION (
  sale_transaction_id INTEGER NOT NULL PRIMARY KEY, 
  employee_number INTEGER NOT NULL, 
  item_total VARCHAR(45), 
  tax INTEGER, total_sum INTEGER, 
  datetime_sold TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
  foreign key(employee_number) references EMPLOYEE(employee_number)
);
INSERT INTO SALE_TRANSACTION VALUES(1,1,3,93,810,'2015-04-03 20:59:51');
INSERT INTO SALE_TRANSACTION VALUES(2,1,5,394,3423.0,'2015-04-03 20:59:57');
INSERT INTO SALE_TRANSACTION VALUES(3,1,5,507,4404,'2015-04-03 21:00:07');
INSERT INTO SALE_TRANSACTION VALUES(4,1,6,14700,127775,'2015-04-05 07:00:46');
INSERT INTO SALE_TRANSACTION VALUES(5,1,5,558,4847,'2015-04-05 17:22:34');
INSERT INTO SALE_TRANSACTION VALUES(6,1,4,272,2365,'2015-04-05 21:41:22');
INSERT INTO SALE_TRANSACTION VALUES(7,1,7,1514,13159,'2015-04-05 21:52:34');
COMMIT;